<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PC Builder 16-Bit Deluxe</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #2c3e50;
            --case-color: #34495e;
            --monitor-bezel: #95a5a6;
            --slot-color: #1a252f;
            --text-color: #ecf0f1;
            --accent-green: #2ecc71;
            --accent-red: #e74c3c;
            --pixel-border: 4px solid #000;
        }

        body {
            font-family: 'Press Start 2P', cursive;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 0;
            padding: 20px;
            user-select: none;
        }

        h1 {
            text-shadow: 4px 4px #000;
            margin-bottom: 10px;
            text-align: center;
            font-size: 20px;
            line-height: 1.5;
        }

        /* =MNovo Monitor CRT */
        .monitor-container {
            margin-bottom: 25px;
        }

        .monitor-bezel {
            background-color: var(--monitor-bezel);
            padding: 20px;
            border: var(--pixel-border);
            box-shadow: 8px 8px 0px #000;
            border-radius: 8px;
        }

        .monitor-screen {
            width: 340px;
            height: 120px;
            background-color: #000;
            border: 6px inset #555;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: var(--accent-green);
            font-size: 12px;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: background-color 0.2s;
        }

        /* Efeito de Scanline Retro */
        .monitor-screen::after {
            content: "";
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(0deg, rgba(0,0,0,0.2), rgba(0,0,0,0.2) 2px, transparent 2px, transparent 4px);
            pointer-events: none;
        }

        /* Estado de Erro do Monitor */
        .monitor-screen.error-state {
            background-color: var(--accent-red);
            color: #fff;
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        .error-big-text { font-size: 18px; margin-bottom: 10px; color: #ffff00; text-shadow: 2px 2px #000;}

        @keyframes shake {
            10%, 90% { transform: translate3d(-2px, 0, 0); }
            20%, 80% { transform: translate3d(4px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-6px, 0, 0); }
            40%, 60% { transform: translate3d(6px, 0, 0); }
        }

        /* Wrapper para alinhar as partes de baixo */
        .bottom-section-wrapper {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }

        /* Gabinete / Placa Mãe */
        .motherboard {
            width: 320px;
            height: 400px;
            background-color: #27ae60;
            border: var(--pixel-border);
            box-shadow: 8px 8px 0px #000;
            position: relative;
            background-image: 
                linear-gradient(#2ecc71 2px, transparent 2px),
                linear-gradient(90deg, #2ecc71 2px, transparent 2px);
            background-size: 20px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .pc-title {
            font-size: 12px;
            margin-bottom: 20px;
            background: #000;
            padding: 5px;
        }

        /* Slots onde as peças encaixam */
        .slot {
            background-color: var(--slot-color);
            border: 2px dashed #7f8c8d;
            margin: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #555;
            font-size: 10px;
            transition: all 0.3s;
        }

        .slot.hovered {
            background-color: #3e5669;
            border-color: var(--text-color);
        }

        /* Tamanhos dos Slots */
        #slot-cpu { width: 80px; height: 80px; }
        #slot-ram { width: 20px; height: 120px; position: absolute; right: 40px; top: 60px; }
        #slot-gpu { width: 180px; height: 40px; position: absolute; bottom: 80px; }
        #slot-psu { width: 100px; height: 80px; position: absolute; bottom: 10px; left: 10px; background-color: #555; border: 2px solid #000; }
        
        /* Inventário de Peças */
        .inventory {
            width: 200px;
            height: 400px; /* Altura fixa para alinhar */
            background-color: var(--case-color);
            border: var(--pixel-border);
            padding: 15px;
            box-shadow: 8px 8px 0px #000;
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }

        .inventory h3 {
            font-size: 12px;
            text-align: center;
            margin-top: 0;
        }

        /* As Peças (Draggables) */
        .part {
            cursor: grab;
            transition: transform 0.1s;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 8px;
            text-align: center;
            border: 2px solid #000;
            box-shadow: 4px 4px 0px rgba(0,0,0,0.5);
            z-index: 10; /* Garantir que fiquem por cima ao arrastar */
        }
        
        .part[draggable="false"] { cursor: default; box-shadow: none; }

        /* Estilo visual de cada peça */
        #cpu { width: 70px; height: 70px; background: #bdc3c7; color: #000; }
        #ram { width: 15px; height: 110px; background: var(--accent-green); writing-mode: vertical-rl; }
        #gpu { width: 170px; height: 35px; background: #e74c3c; }
        #psu { width: 90px; height: 70px; background: #f39c12; color: #000; }

        /* Caixa de Diálogo (Estilo RPG) */
        .dialog-box {
            width: 90%;
            max-width: 600px;
            height: 80px;
            background-color: #000;
            border: 4px solid #fff;
            margin-top: 20px;
            padding: 15px;
            font-size: 10px;
            line-height: 1.6;
            color: #fff;
        }

        /* Responsividade Básica */
        @media (max-width: 650px) {
            .monitor-screen { width: 280px; }
            .bottom-section-wrapper { flex-direction: column; align-items: center; }
            .inventory { width: 320px; height: auto; flex-direction: row; flex-wrap: wrap; justify-content: center;}
        }
    </style>
</head>
<body>

    <h1>MONTADOR DE PC<br><span style="color: #f1c40f; font-size: 0.6em;">EDITION 16-BIT</span></h1>

    <div class="monitor-container">
        <div class="monitor-bezel">
            <div class="monitor-screen" id="monitorScreen">
                <div id="screenContent">
                    > SISTEMA EM STANDBY...<br>
                    > AGUARDANDO HARDWARE.
                </div>
            </div>
        </div>
    </div>

    <div class="bottom-section-wrapper">
        <div class="motherboard">
            <div class="pc-title">PLACA-MÃE</div>
            
            <div class="slot" id="slot-cpu" data-part="cpu">CPU</div>
            <div class="slot" id="slot-ram" data-part="ram">RAM</div>
            <div class="slot" id="slot-gpu" data-part="gpu">GPU</div>
            <div class="slot" id="slot-psu" data-part="psu">FONTE</div>
        </div>

        <div class="inventory">
            <h3>PEÇAS</h3>
            <div class="part" id="cpu" draggable="true" title="Processador">CPU</div>
            <div class="part" id="ram" draggable="true" title="Memória RAM">RAM 8GB</div>
            <div class="part" id="gpu" draggable="true" title="Placa de Vídeo">RTX 4090</div>
            <div class="part" id="psu" draggable="true" title="Fonte de Energia">FONTE</div>
        </div>
    </div>

    <div class="dialog-box" id="dialog">
        Arraste as peças para a placa-mãe. Cuidado com a compatibilidade!
    </div>

    <script>
        const parts = document.querySelectorAll('.part');
        const slots = document.querySelectorAll('.slot');
        const dialog = document.getElementById('dialog');
        const monitorScreen = document.getElementById('monitorScreen');
        const screenContent = document.getElementById('screenContent');

        // Dados educativos sobre as peças
        const partInfo = {
            'cpu': "PROCESSADOR (CPU) INSTALADO. O cérebro está pronto para calcular.",
            'ram': "MEMÓRIA RAM INSTALADA. Espaço de trabalho temporário liberado.",
            'gpu': "PLACA DE VÍDEO INSTALADA. Capacidade gráfica adicionada.",
            'psu': "FONTE DE ENERGIA CONECTADA. O sistema agora tem eletricidade."
        };

        let partsInstalled = 0;
        const totalParts = 4;
        let errorTimeout;

        // Configuração do Arrastar (Drag)
        parts.forEach(part => {
            part.addEventListener('dragstart', dragStart);
        });

        // Configuração dos Slots (Drop)
        slots.forEach(slot => {
            slot.addEventListener('dragover', dragOver);
            slot.addEventListener('dragenter', dragEnter);
            slot.addEventListener('dragleave', dragLeave);
            slot.addEventListener('drop', dragDrop);
        });

        function dragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.id);
             // Pequeno delay visual para não sumir instantaneamente
             setTimeout(() => { e.target.style.opacity = '0.5'; }, 0);
        }

        function dragOver(e) { e.preventDefault(); }

        function dragEnter(e) {
            e.preventDefault();
            if(e.target.classList.contains('slot')) e.target.classList.add('hovered');
        }

        function dragLeave(e) {
            if(e.target.classList.contains('slot')) e.target.classList.remove('hovered');
        }

        function dragDrop(e) {
            const id = e.dataTransfer.getData('text/plain');
            const draggable = document.getElementById(id);
            draggable.style.opacity = '1';
            
            // Garante que o alvo é um slot e não uma peça já colocada
            let targetSlot = e.target;
            if (!targetSlot.classList.contains('slot')) {
                targetSlot = targetSlot.closest('.slot');
            }

            if (!targetSlot) return; // Se soltou fora de um slot válido

            targetSlot.classList.remove('hovered');
            const slotType = targetSlot.getAttribute('data-part');

            // --- VERIFICAÇÃO DE ACERTO/ERRO ---
            if (id === slotType) {
                // ACERTOU
                if(targetSlot.children.length > 0) return; // Slot já ocupado

                targetSlot.appendChild(draggable);
                draggable.setAttribute('draggable', 'false');
                
                playSound(600, 100);
                typeWriter(partInfo[id]);
                updateMonitor("HARDWARE DETECTADO: " + id.toUpperCase(), false);

                partsInstalled++;
                checkWin();
            } else {
                // ERROU
                playSound(150, 600, 'sawtooth'); // Som de erro mais longo e grave
                typeWriter("Cuidado! Essa peça não encaixa nesse slot.");
                triggerErrorScreen();
            }
        }

        // --- NOVAS FUNÇÕES DO MONITOR ---

        function triggerErrorScreen() {
            clearTimeout(errorTimeout);
            monitorScreen.classList.add('error-state');
            screenContent.innerHTML = '<div class="error-big-text">ERRO CRÍTICO</div>> FALHA DE COMPATIBILIDADE<br>> HARDWARE REJEITADO';

            // Retorna ao normal após 2.5 segundos
            errorTimeout = setTimeout(() => {
                monitorScreen.classList.remove('error-state');
                if (partsInstalled < totalParts) {
                    updateMonitor("> SISTEMA EM STANDBY...<br>> AGUARDANDO HARDWARE.", false);
                } else {
                     updateMonitor("> SISTEMA OPERACIONAL CARREGADO.<br>> PRONTO PARA USO.", false);
                }
            }, 2500);
        }

        function updateMonitor(text, isError) {
            if(monitorScreen.classList.contains('error-state')) return; // Não sobrescreve se estiver em erro
            screenContent.innerHTML = "> " + text;
        }


        // Função para verificar vitória
        function checkWin() {
            if (partsInstalled === totalParts) {
                setTimeout(() => {
                    playSound(800, 100); setTimeout(() => playSound(1200, 600), 150);
                    dialog.innerHTML = "TODOS SISTEMAS OPERACIONAIS. INICIANDO BOOT...";
                    monitorScreen.style.backgroundColor = "#2ecc71";
                    monitorScreen.style.color = "#000";
                    screenContent.innerHTML = '<div class="error-big-text" style="color:#000; text-shadow:none;">SUCESSO!</div>> PC LIGADO.';
                }, 1000);
            }
        }

        // Efeito de Digitação (Typewriter) na caixa inferior
        let typeTimeout;
        function typeWriter(text) {
            const speed = 20;
            let i = 0;
            dialog.innerHTML = "";
            clearTimeout(typeTimeout);
            function type() {
                if (i < text.length) {
                    dialog.innerHTML += text.charAt(i);
                    i++;
                    typeTimeout = setTimeout(type, speed);
                }
            }
            type();
        }

        // Sintetizador de áudio
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSound(freq, duration, type = 'square') {
            const oscillator = audioCtx.createOscillator();
            const gainNode = audioCtx.createGain();
            oscillator.type = type;
            oscillator.frequency.value = freq;
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            oscillator.start();
            gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.00001, audioCtx.currentTime + duration / 1000);
            setTimeout(() => { oscillator.stop(); }, duration);
        }

        // Resetar peça se soltar fora
        document.addEventListener("dragend", function(event) {
            event.target.style.opacity = '1';
        });
    </script>
</body>
</html>